{% extends "layout.html" %}

{% block title %}
Form
{% endblock %}

{% block main %}
<div class="background-box">
  <h1>Movie Preferences</h1>
  <p>Select filters that align with your preferences!</p>

  <form id="movieForm" action="/form" method="post">
    <div class="horizontal-row">
      <h2>Genre</h2>
      <div class="checkbox-container">
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Action" />
          Action
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Adventure"
          />
          Adventure
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Animation"
          />
          Animation
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Biography"
          />
          Biography
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Comedy" />
          Comedy
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Crime" />
          Crime
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Drama" />
          Drama
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Fantasy"
          />
          Fantasy
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Film-Noir"
          />
          Film-Noir
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="History"
          />
          History
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Horror" />
          Horror
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Music" />
          Music
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Musical"
          />
          Musical
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Romance"
          />
          Romance
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Sci-Fi" />
          Sci-Fi
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="Sport" />
          Sport
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Thriller"
          />
          Thriller
        </label>
        <label>
          <input class="checkbox" type="checkbox" name="genre" value="War" />
          War
        </label>
        <label>
          <input
            class="checkbox"
            type="checkbox"
            name="genre"
            value="Western"
          />
          Western
        </label>
      </div>
    </div>

    <div class="horizontal-row">
      <h2>Maximum Movie Length</h2>
      <label>
        Length (minutes):
        <input
          type="range"
          id="valueSlider"
          name="valueSlider"
          min="30"
          max="300"
          step="30"
          value="150"
          oninput="updateSliderValue(this.value)"
        />
        <output id="sliderValue">150</output>
      </label>
    </div>

    <div class="horizontal-row">
      <h2>Lowest Allowed Average Audience Rating</h2>
      <label>
        Rating (0-10):
        <input type="number" name="rating" min="0" max="10" step="1" value="5"/>
      </label>
    </div>

    <button class="btn btn-light" type="button" onclick="setDefaultValues()">Select All</button>
    <button class="btn btn-light" type="submit">Submit</button>
    <button class="btn btn-light" type="reset">Reset</button>
  </form>
</div>

<script>
  function setDefaultValues() {
    // Set all genres to be checked
    var genreCheckboxes = document.getElementsByName("genre");
    genreCheckboxes.forEach(function (checkbox) {
      checkbox.checked = true;
    });
  
    // Set movie length to the default value
    var lengthSlider = document.getElementById("valueSlider");
    lengthSlider.value = 300;
    var output = document.getElementById("sliderValue");
    output.innerHTML = lengthSlider.value;

    // Set rating to the default value
    var ratingInput = document.getElementsByName("rating")[0];
    ratingInput.value = "0";
  }
</script>

<style>
  /* Apply a box-sizing reset for better layout control */
  * {
    box-sizing: border-box;
  }

  /* Create a container to hold the checkboxes */
  .checkbox-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Three columns with equal width */
    gap: 10px; /* Add some spacing between checkboxes */
  }

  /* Style for individual checkboxes */
  .checkbox-container input[type="checkbox"] {
    /* Add your desired checkbox styles here */
    /* For example: */
    margin: 0;
    padding: 5px;
  }

  /* Style for horizontal rows */
  .horizontal-row {
    margin-bottom: 10px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
  }
</style>

<!-- Script to update the slider with the proper time value -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var slider = document.getElementById("valueSlider");
    var output = document.getElementById("sliderValue");
    var resetButton = document.querySelector("button[type='reset']");

    slider.oninput = function () {
      output.innerHTML = slider.value;
    };

    resetButton.addEventListener("click", function () {
      slider.value = 150;
      output.innerHTML = slider.value;
    });
  });
</script>
{% endblock %}